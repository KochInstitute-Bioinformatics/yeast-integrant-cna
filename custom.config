// custom.config - Site-specific configuration for SLURM cluster

// Parameters - only override what's different from defaults
params {
    // Input data
    samples = "/net/bmc-lab3/data/bcc/projects/cmelen-Love/yeast-integrant-cna_test/samples.csv"

    // Reference directories
    transgene_dir = "/net/bmc-lab3/data/bcc/projects/cmelen-Love/transgenes"
    transgene_library = "/net/bmc-lab3/data/bcc/projects/cmelen-Love/transgenes/transgene_library.csv"

    // Output directory
    outdir = "/net/bmc-lab3/data/bcc/projects/cmelen-Love/yeast-integrant-cna_test/cna_test"
    
    // Assembly evaluation (if you want to run it)
    run_assembly_evaluation = true  // Set to true when ready
    reference_genome = "/net/bmc-lab3/data/bcc/projects/cmelen-Love/genome/WT_mito.fa"
    reference_chromosomes = "/net/bmc-lab3/data/bcc/projects/cmelen-Love/genome/WT_chrs.fa"
    transcripts_fasta = "/net/bmc-lab3/data/bcc/projects/cmelen-Love/genome/phaffi_transcripts.fa"
}

// Singularity configuration for your cluster
singularity {
    enabled = true
    autoMounts = true
    pullTimeout = '60m'
    cacheDir = '/net/bmc-lab3/data/bcc/charliew/.singularity_cache'
}

// Conda configuration
conda {
    enabled = true
    useMamba = true
    cacheDir = '/net/bmc-lab3/data/bcc/charliew/.conda/pkgs'
}

// SLURM executor settings
process {
    executor = 'slurm'
    queue = 'bcc'
}

executor {
    name = 'slurm'
    queueSize = 8
    submitRateLimit = '8/1min'
}

// Override report locations to match outdir
timeline {
    enabled = true
    file = "${params.outdir}/pipeline_info/execution_timeline.html"
    overwrite = true
}

report {
    enabled = true
    file = "${params.outdir}/pipeline_info/execution_report.html"
    overwrite = true
}

trace {
    enabled = true
    file = "${params.outdir}/pipeline_info/execution_trace.txt"
    overwrite = true
}

dag {
    enabled = true
    file = "${params.outdir}/pipeline_info/pipeline_dag.svg"
    overwrite = true
}
